(this["webpackJsonpface-tracking"]=this["webpackJsonpface-tracking"]||[]).push([[0],{181:function(e,t,a){"use strict";a.r(t);var r=a(2),s=a.n(r),c=a(40),n=a.n(c),i=(a(95),a(8)),o=a(185),l=a(186),m=a(187),d=a(9),u=a(62),j=a(0),g=a(183),b=a(184),p=function(){document.querySelector(".text-container").classList.add("is-loaded")},h=a.p+"static/media/faceMeshTemplate.6e15d49f.png",f=a(16),O=function(){var e=Object(i.useLoader)(j.TextureLoader,h);return Object(f.jsx)("meshStandardMaterial",{transparent:!0,map:e})},x=window.twgl;function v(e){Object.assign({},e);var t=[0,0],a=[0,0],s=Object(r.useState)(!1),c=Object(d.a)(s,2),n=c[0],o=c[1],l=Object(r.useState)(!0),m=Object(d.a)(l,2),h=m[0],v=m[1],k=Object(r.useRef)(),w=Object(r.useRef)(),T={};T.width=window.innerWidth,T.height=window.innerHeight;var y,F=T.width/2,C=T.height/2;!1===n?(y=document.createElement("canvas"),o(!0)):y=document.querySelector(".canvas"),y.className="canvas";var S=y.getContext("webgl");document.body.appendChild(y);var N={width:1,height:1},B=x.createTexture(S,{src:h?"mobile-images/lake.jpg":"images/lake.jpg",crossOrigin:""},(function(e,t,a){N=a})),M=x.createTexture(S,{src:h?"mobile-images/lake.jpg":"images/lake.jpg",crossOrigin:""},(function(e,t,a){N=a})),P=x.createTexture(S,{src:h?"mobile-images/space-station.jpg":"images/space-station.jpg",crossOrigin:""},(function(e,t,a){N=a})),D=x.createTexture(S,{src:h?"mobile-images/lake-map-blurred.jpg":"images/lake-map-blurred.jpg",crossOrigin:""}),E=x.createTexture(S,{src:h?"mobile-images/lake-map-blurred.jpg":"images/lake-map-blurred.jpg",crossOrigin:""}),I=x.createTexture(S,{src:h?"mobile-images/space-station-map.jpg":"images/space-station-map.jpg",crossOrigin:""}),L=x.createProgramInfo(S,["vs","fs"]),_=x.primitives.createXYQuadBufferInfo(S),q=document.querySelector(".demo-1"),R=document.querySelector(".demo-2");q.addEventListener("click",(function(e){B=M,D=E})),R.addEventListener("click",(function(e){B=P,D=I}));var z,G=new j.CanvasTexture(S.canvas),U=new j.Vector3,Z=0;Object(i.useFrame)((function(e){var a=e.clock;z=a.getElapsedTime(),k.current&&w.current&&0!==k.current.position.x&&z-Z>.05&&(Z=a.getElapsedTime(),U.setFromMatrixPosition(k.current.matrixWorld).project(w.current),U.x=U.x*F+F,U.y=-U.y*C+C,t[0]=.05*-(U.x/T.width*2-1),t[1]=.05*(U.y/T.height*2-1))})),Object(i.useFrame)((function(){x.resizeCanvasToDisplaySize(y),S.viewport(0,0,y.width,y.height),S.clearColor(0,0,0,0),S.clear(S.COLOR_BUFFER_BIT),S.useProgram(L.program),x.setBuffersAndAttributes(S,L,_);var e=y.width/y.height,r=N.width/N.height,s=[r/e,0,0,0,-1,0,0,0,1];a[0]+=.05*(t[0]-a[0]),a[1]+=.05*(t[1]-a[1]),x.setUniforms(L,{u_matrix:s,u_originalImage:B,u_mapImage:D,u_mouse:a}),x.drawBufferInfo(S,_),G.needsUpdate=!0}));var A=Object(g.a)();return Object(r.useEffect)((function(){A&&("0"===A.tier||A.isMobile?v(!0):v(!1))}),[A,q.style]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(u.ZapparCamera,{name:"ZapparCamera",userFacing:!0,userCameraMirrorMode:"css",makeDefault:!1,renderPriority:0,ref:w}),Object(f.jsx)(u.FaceTracker,{name:"FaceTracker",ref:k,onVisible:function(){return p()},children:Object(f.jsx)(r.Suspense,{fallback:null,children:Object(f.jsxs)("mesh",{position:[0,0,0],scale:[2,2,2],children:[Object(f.jsx)(O,{}),Object(f.jsx)(u.FaceBufferGeometry,{trackerGroup:k})]})})}),Object(f.jsx)(b.a,{enableZoom:!1,enablePan:!1,enableKeys:!1}),Object(f.jsxs)("mesh",{name:"Photosphere",position:[0,0,0],rotation:[0,Math.PI/2,0],scale:[-1,1,1],children:[Object(f.jsx)("sphereGeometry",{args:[10,32,32]}),Object(f.jsx)("meshBasicMaterial",{side:j.BackSide,map:G})]})]})}function k(){return Object(f.jsxs)("div",{className:"text-container",children:[Object(f.jsx)("h1",{className:"loaded-message",children:"False 3D Effect is loading..."}),Object(f.jsxs)("div",{className:"instruction-message",children:[Object(f.jsx)("h1",{children:"Move your head around to gain false perspective and make the 2D background look 3D"}),Object(f.jsxs)("span",{className:"drag-message",children:[Object(f.jsx)("img",{src:"https://img.icons8.com/ios-filled/50/ffffff/resize-four-directions.png",alt:"drag icon"}),Object(f.jsx)("h1",{children:"Drag mouse to look around photosphere"})]})]})]})}var w=function(){return Object(f.jsxs)("div",{className:"canvas-container",children:[Object(f.jsxs)(i.Canvas,{className:"webgl",camera:{fov:50,position:[.3877541317884009,-.7852562001645822,-.4929700126621239]},linear:!0,flat:!0,children:[Object(f.jsx)(v,{}),Object(f.jsx)(o.a,{pixelated:!0}),Object(f.jsx)(l.a,{})]}),Object(f.jsx)(m.a,{className:"stats"}),Object(f.jsxs)("div",{className:"demo-container",children:[Object(f.jsx)("button",{className:"demo-btn demo-1",children:"Lake Demo"}),Object(f.jsx)("button",{className:"demo-btn demo-2",children:"Space Demo"})]}),Object(f.jsx)(k,{})]})},T=(a(178),function(e){e&&e instanceof Function&&Promise.resolve().then(a.bind(null,178)).then((function(t){var a=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,n=t.getTTFB;a(e),r(e),s(e),c(e),n(e)}))});n.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(w,{})}),document.getElementById("root")),T()},95:function(e,t,a){}},[[181,1,2]]]);
//# sourceMappingURL=main.11c50632.chunk.js.map